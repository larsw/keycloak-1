FROM alpine:3.10.2

ENV NAME keycloak-gatekeeper
ENV KEYCLOAK_VERSION 7.0.0
ENV GOOS linux
ENV GOARCH amd64

LABEL Name=keycloak-gatekeeper \
      Release=https://github.com/keycloak/keycloak-gatekeeper \
      Url=https://github.com/keycloak/keycloak-gatekeeper \
      Help=https://issues.jboss.org/projects/KEYCLOAK

WORKDIR "/opt"

RUN apk update && apk add --no-cache ca-certificates curl tar && \
    curl -fssL "https://downloads.jboss.org/keycloak/$KEYCLOAK_VERSION/gatekeeper/$NAME-$GOOS-$GOARCH.tar.gz" | \
    tar -xz && chmod +x /opt/$NAME && \
    apk del curl tar

ENTRYPOINT [ "/opt/keycloak-gatekeeper" ]
